var React = require('react');

var router = require('router');
var collections = require('collections');

var FourOhFourPage = require('./404');

var GraphView = require('graph-view/graph-view');
var predicates = ['stewardOf'];
//TODO actions
var actions = []

var entities = [
  {
    id: 1,
    name: 'Mikey',
    stewardOf: 2
  },
  {
    id: 2,
    name: 'Hannah',
    stewardOf: null
  },
  {
    id: 3,
    name: 'Craig',
    stewardOf: null
  }
];

module.exports = React.createClass({

  render: function () {
    var route = this.props.route;

    var Page;
    if (route) {
      Page = collections[route.collection].Page;
    } else {
      Page = FourOhFourPage;
    }

    return (
      <div>
        <header>
          {
            "collection: " + route.collection
            + ", id: " + route.id
            + ", relation: " + route.relation
            + ", query: " + JSON.stringify(route.query)
          }
        </header>
        <main>
          <Page
            route={this.props.route}
            model={this.props.model} />
          <GraphView entities={entities} predicates={predicates} actions={actions} />
        </main>
      </div>
    );
  },
});
